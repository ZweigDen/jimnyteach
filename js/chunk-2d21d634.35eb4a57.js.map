{"version":3,"sources":["webpack:///./src/views/admin/Coupons.vue","webpack:///./src/views/admin/Coupons.vue?22cf"],"names":["class","scope","type","openModal","href","logOut","coupons","item","key","id","title","percent","due_date","code","is_enabled","checkDelete","product","coupon","deleteCoupon","loading","loadingStatus","ref","getCoupons","page","pagination","data","isNew","components","Pagination","Checkdele","Addedit","methods","document","cookie","this","$router","push","url","$http","get","then","res","success","alert","catch","err","console","log","$refs","addedit","check","delete","hideModal","mounted","render"],"mappings":"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","file":"js/chunk-2d21d634.35eb4a57.js","sourcesContent":["<template>\n  <section class=\"py-5 container d-flex flex-column justify-content-between\">\n    <div>\n      <!-- 右邊上方banner -->\n      <div class=\"d-flex justify-content-between align-items-center mb-3\">\n        <div class=\"d-flex align-items-center\">\n          <h2 class=\"me-4\">優惠卷</h2>\n          <button type=\"button\" class=\"ms-5 btn btn-outline-dark\" @click=\"openModal(true)\">\n            <i class=\"fas fa-plus me-2 text-secondary\"></i>新增優惠\n          </button>\n        </div>\n        <a href=\"#\" class=\"text-dark\" @click=\"logOut\"><i class=\"fas fa-sign-out-alt h2\"></i></a>\n      </div>\n      <!-- 下方內容 -->\n      <table class=\"table table-borderless table-hover\">\n        <thead>\n          <tr class=\"h4 border-bottom\">\n            <th scope=\"col\">優惠標題<i class=\"fas fa-arrow-down text-primary ml-2\"></i></th>\n            <th scope=\"col\">折扣％</th>\n            <th scope=\"col\">到期日</th>\n            <th scope=\"col\">code</th>\n            <th scope=\"col\">啟用</th>\n            <th scope=\"col\">刪除</th>\n            <th scope=\"col\">修改</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr class=\"h4\" v-for=\"item in coupons\" :key=\"item.id\">\n            <td>{{ item.title }}</td>\n            <td>{{ item.percent }}</td>\n            <td>{{ item.due_date }}</td>\n            <td>{{ item.code }}</td>\n            <td v-if=\"item.is_enabled\"><i class=\"far fa-check-square text-success h3\"></i></td>\n            <td v-else><i class=\"far fa-times-circle h3 text-warning\"></i></td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"checkDelete(item)\"\n              >\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary btn-sm\"\n                @click=\"openModal(false, item)\"\n              >\n                <i class=\"fas fa-pen\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!-- delete modal -->\n    <Checkdele\n      :product=\"coupon\"\n      @delete-product=\"deleteCoupon\"\n      :loading=\"loadingStatus\"\n      ref=\"check\"\n    ></Checkdele>\n    <!-- add&edit nodal -->\n    <Addedit :product=\"coupon\" ref=\"addedit\" @render=\"getCoupons\"></Addedit>\n    <!-- 分頁模組 -->\n    <Pagination\n      class=\"d-flex justify-content-center\"\n      :page=\"pagination\"\n      @get_product=\"getCoupons\"\n    ></Pagination>\n  </section>\n</template>\n<script>\nimport Pagination from '@/components/Pagination.vue';\nimport Checkdele from '@/components/CheckDele.vue';\nimport Addedit from '@/components/AddEditModal.vue';\n\nexport default {\n  data() {\n    return {\n      loadingStatus: '',\n      coupons: [],\n      coupon: {},\n      pagination: {},\n      isNew: false,\n    };\n  },\n  components: {\n    Pagination,\n    Checkdele,\n    Addedit,\n  },\n  methods: {\n    // 登出\n    logOut() {\n      document.cookie = 'hexToken=;expires=;';\n      this.$router.push('/');\n    },\n    // 取得資料\n    getCoupons(page = 1) {\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/coupons?page=${page}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.coupons = res.data.coupons;\n            this.pagination = res.data.pagination;\n          } else {\n            alert(res);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    // open add&edit Modal\n    openModal(isNew, item) {\n      this.isNew = isNew;\n      if (this.isNew) {\n        this.coupon = {\n          // imagesUrl: [],\n        };\n      } else {\n        this.coupon = { ...item };\n      }\n      this.$refs.addedit.openModal();\n    },\n    // check刪除\n    checkDelete(item) {\n      this.coupon = item;\n      this.$refs.check.openModal();\n    },\n    // 刪除優惠卷\n    deleteCoupon(id) {\n      this.loadingStatus = id;\n      const url = `${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/admin/coupon/${id}`;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.getCoupons();\n            this.loadingStatus = '';\n            this.$refs.check.hideModal();\n          } else {\n            alert(res);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  mounted() {\n    this.getCoupons();\n  },\n};\n</script>\n","import { render } from \"./Coupons.vue?vue&type=template&id=24fd4be9\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}